<section>
  <form [formGroup]="formAddProducto" (ngSubmit)="validarCamposProduto()" novalidate>
    <div class="row">

      <!--Imagen-->
      <div class="col-12 col-sm-12 col-md-4 col-lg-4 mb-r wow fadeInLeft" data-wow-delay="0.4s" id="imagen-productos"
        style="display: none;">
        <div class="card card-cascade narrower">
          <div class="view view-cascade gradient-card-header orange-chang">
            <h4 class="mb-0">Imagen</h4>
          </div>
          <div class="card-body text-center">
            <input type="file" id="imageProducto" class="dropify" (change)="fileChangeEvent($event)" data-height="300"
              data-allowed-file-extensions="jpg png jpeg" />
          </div>
        </div>

      </div>
      <!-- /.Imagen -->

      <!--Datos del producto-->
      <div class="col-12 col-sm-12 col-md-12 col-lg-12" id="formulario-productos">
        <div class="card card-cascade narrower">
          <div class="view view-cascade gradient-card-header orange-chang">
            <h4 class="mb-0">Datos del Producto</h4>
          </div>
          <!-- Contenido -->
          <div class="card-body ">

            <div class="row">

              <div class="col-12">
                <div class="md-form input-group margin-input-message">
                  <input type="text" id="nombreproducto" mdbInputDirective [mdbValidate]="false" formControlName="nombreProducto"
                    [(ngModel)]="formAddProducto.value.nombreProducto" class="form-control letras" autocomplete="off"
                    placeholder="Nombre del Producto" style="margin-right: 5%;">
                  <div class="input-group-btn">
                    <button tabindex="-1" type="button" class="btn orange-chang px-3 add-img-position" (click)="showCardImg()"
                      mdbTooltip="Agregar Imagen" placement="bottom" id="btn-animation" style="margin-left: -20%;">
                      <i class="fa fa-file-photo-o" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>
                <show-errors [control]="formAddProducto.controls['nombreProducto']"></show-errors>
              </div>


              <div class="col-9 col-sm-9 col-md-9">
                <br>
                <label for="proveedor" class="grey-text-card">Proveedor</label>
                <ng-select [items]="proveedores" bindLabel="NombreProveedor" bindValue="IdProveedor" id="proveedor"
                  placeholder="Selecciona un proveedor" (change)="onChangeProveedor($event)" [(ngModel)]="proveedorSelecionado"
                  formControlName="proveedor">
                  <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
                    <div style="margin: 10px 0;" class="card">
                      <div class="card-body">
                        <h5 class="card-title" [ngOptionHighlight]="search">{{item.NombreProveedor}}</h5>
                        <p class="card-subtitle mb-2 text-muted">
                          <b>Nombre del Representante</b>
                          <br>
                          <i>{{item.NombreRepresentante}}</i>
                        </p>
                        <p class="card-text">
                          <b>Descripcion</b>
                          <br>
                          <i>{{item.Descripcion}}</i>
                        </p>
                      </div>
                    </div>
                  </ng-template>
                </ng-select>

                <show-errors [control]="formAddProducto.controls['proveedor']"></show-errors>
              </div>

              <div class="col-3 col-sm-3 col-md-3">
                <br>
                <button type="button" class="btn orange-chang btn-sm btn-block waves-light add-btn-position-espacio"
                  tabindex="-1" (click)="agregarProveedor()" mdbWavesEffect>Agregar</button>
              </div>

              <div class="col-9 col-sm-9 col-md-9">
                <br>
                <label for="categoria" class="grey-text-card">Categoria</label>
                <ng-select [items]="categorias" bindLabel="NombreCategoria" bindValue="IdCategoria" placeholder="Selecciona una categoria"
                  formControlName="categoria" id="categoria" (change)="onChangeCategoria($event)">
                </ng-select>
                <show-errors [control]="formAddProducto.controls['categoria']"></show-errors>
              </div>

              <div class="col-3 col-sm-3 col-md-3">
                <br>
                <button type="button" class="btn orange-chang btn-sm btn-block waves-light add-btn-position-espacio"
                  tabindex="-1" mdbWavesEffect (click)="showModalCategoria=true">Agregar</button>
              </div>

              <div class="col-9 col-sm-9 col-md-9">
                <br>
                <label for="clasificacion" class="grey-text-card">Clasificación</label>
                <ng-select [items]="clasificaciones" bindLabel="NombreClasificacion" bindValue="IdClasificacion"
                  placeholder="Selecciona una clasificacion" formControlName="clasificacion" id="clasificacion"
                  (change)="onChangeClasificacion($event)">
                </ng-select>
                <show-errors [control]="formAddProducto.controls['clasificacion']"></show-errors>
              </div>

              <div class="col-3 col-sm-3 col-md-3">
                <br>
                <button type="button" class="btn orange-chang btn-sm btn-block waves-light add-btn-position-espacio"
                  tabindex="-1" mdbWavesEffect (click)="showModalClasificacion=true">Agregar</button>
              </div>

              <div class="col-9 col-sm-9 col-md-9">
                <br>
                <label for="subclasificacion" class="grey-text-card">Subclasificación</label>
                <ng-select [items]="subclasificaciones" bindLabel="NombreSubClasificacion" bindValue="IdSubClasificacion"
                  placeholder="Selecciona una subclasificacion" [searchFn]="customSearchFn" formControlName="subclasificacion"
                  id="subclasificacion" (change)="onChangeSubclasificacion($event)">
                </ng-select>
                <show-errors [control]="formAddProducto.controls['subclasificacion']"></show-errors>
              </div>

              <div class="col-3 col-sm-3 col-md-3">
                <br>
                <button type="button" class="btn orange-chang btn-sm btn-block waves-light add-btn-position-espacio"
                  tabindex="-1" mdbWavesEffect (click)="showModalSubclasificacion=true">Agregar</button>
              </div>

              <div class="col-12 col-sm-12 col-md-5">
                <br>
                <label class="grey-text-card">Empaque</label>
                <ng-select [items]="empaques" bindLabel="NombreEmpaque" bindValue="IdEmpaque" placeholder="Selecciona un empaque"
                  formControlName="empaque" id="empaque" (change)="onChangeEmpaque($event)">
                </ng-select>
                <show-errors [control]="formAddProducto.controls['empaque']"></show-errors>
              </div>

              <div class="col-12 col-sm-12 col-md-4 mt-4">
                <div class="md-form">
                  <input onlyPositiveNumber mdbInputDirective [mdbValidate]=false type="text" id="cantidadEmpaque"
                    formControlName="cantidadEmpaque" class="form-control" autocomplete="off">
                  <label for="cantidadEmpaque">Cantidad por Empaque</label>
                  <show-errors [control]="formAddProducto.controls['cantidadEmpaque']"></show-errors>
                </div>
              </div>

              <div class="col-12 col-sm-12 col-md-3 mb-4">
                <br>
                <button type="button" class="btn orange-chang btn-sm btn-block waves-light add-btn-position-espacio"
                  tabindex="-1" mdbWavesEffect (click)="showModalEmpaque = true">Agregar</button>
              </div>

              <div class="col-9 col-sm-9 col-md-9">
                <br>
                <label class="grey-text-card">Envase</label>
                <ng-select [items]="envases" bindLabel="NombreEnvase" bindValue="IdEnvase" placeholder="Selecciona un envase"
                  formControlName="envase" id="envase" (change)="onChangeEnvase($event)">
                </ng-select>
                <show-errors [control]="formAddProducto.controls['envase']"></show-errors>
              </div>

              <div class="col-3 col-sm-3 col-md-3">
                <br>
                <button type="button" class="btn orange-chang btn-sm btn-block waves-light add-btn-position-espacio"
                  tabindex="-1" mdbWavesEffect (click)="showModalEnvase = true">Agregar</button>
              </div>


              <div class="col-12 col-sm-12 col-md-5">
                <br>
                <label class="grey-text-card">Unidad de Medida</label>
                <ng-select [items]="unidades" dropdownPosition="top" bindLabel="NombreUnidad" bindValue="IdUnidadMedida"
                  placeholder="Selecciona una unidad de medida" formControlName="unidadmedida" id="unidadmedida"
                  (change)="onChangeUnidadMedida($event)">
                </ng-select>
                <show-errors [control]="formAddProducto.controls['unidadmedida']"></show-errors>
              </div>

              <div class="col-12 col-sm-12 col-md-4 mt-4">

                <div class="md-form">
                  <input onlyNumbers="decimal" mdbInputDirective [mdbValidate]=false min="0" type="text" id="valorunidadmedida"
                    formControlName="valorunidadmedida" class="form-control" autocomplete="off">
                  <label for="valorunidadmedida">Valor unidad de medida</label>
                  <show-errors [control]="formAddProducto.controls['valorunidadmedida']"></show-errors>
                </div>
              </div>

              <div class="col-12 col-sm-12 col-md-3">
                <br>
                <button type="button" class="btn orange-chang btn-sm btn-block waves-light add-btn-position-espacio"
                  tabindex="-1" mdbWavesEffect (click)="showModalUnidadMedida = true">Agregar</button>
              </div>

              <div class="col-9 col-sm-9 col-md-9">
                <br>
                <label class="grey-text-card">Tipo de Insumo</label>
                <ng-select dropdownPosition="top" [items]="Insumo" (change)="changeInsumo($event)" formControlName="tipoInsumo"
                  [(ngModel)]="tipoInsumoSeleccionado" bindLabel="TipoInsumo" bindValue="Id" placeholder="Selecciona un tipo de insumo"
                  id="TipoInsumo">
                </ng-select>
              </div>

              <div class="col-3 col-sm-3 col-md-3 mt-4">
                <div class="md-form">
                  <input onlyPositiveNumber mdbInputDirective [mdbValidate]=false type="text" id="diasDeUso"
                    formControlName="diasDeUso" class="form-control" autocomplete="off">
                  <label for="diasDeUso">Días de uso</label>
                  <show-errors [control]="formAddProducto.controls['diasDeUso']"></show-errors>
                </div>
              </div>

              <div class="col-md-6 mt-4">
                <div class="md-form">
                  <input Alphanumeric mdbInputDirective [mdbValidate]=false type="text" id="codigoProducto"
                    formControlName="codigoProducto" class="form-control">
                  <label for="codigoProducto" class="">Código producto</label>
                  <show-errors [control]="formAddProducto.controls['codigoProducto']"></show-errors>
                </div>
              </div>

              <div class="col-md-6 mt-4">
                <div class="md-form">
                  <input Alphanumeric mdbInputDirective [mdbValidate]=false formControlName="codigoInterno" type="text"
                    id="codigoInterno" class="form-control">
                  <label for="codigoInterno" class="">Código interno</label>
                  <show-errors [control]="formAddProducto.controls['codigoInterno']"></show-errors>
                </div>
              </div>

              <div class="col-md-6 mt-6">
                <div class="md-form">
                  <input onlyPositiveNumber mdbInputDirective [mdbValidate]=false type="text" formControlName="codigoBarra"
                    id="codigoBarra" class="form-control">
                  <label for="codigoBarra" class="">Código barra</label>
                  <show-errors [control]="formAddProducto.controls['codigoBarra']"></show-errors>
                </div>
              </div>

              <div class="col-md-6">
                <div class="md-form">
                  <textarea mdbInputDirective [mdbValidate]=false type="text" id="descripcionproducto" formControlName="descripcionProducto"
                    [(ngModel)]="formAddProducto.value.descripcionProducto" class="md-textarea form-control"
                    autocomplete="off"></textarea>
                  <show-errors [control]="formAddProducto.controls['descripcionProducto']"></show-errors>
                  <label for="descripcionproducto">Descripción</label>
                </div>
              </div>

            </div>
            <br>
            <div class="text-center mt-1-half">
              <button class="btn orange-chang mb-1" [disabled]="!formAddProducto.valid">Ingresar
                <i class="fa fa-check ml-1"></i>
              </button>
            </div>

          </div>
          <!-- Contenido -->
        </div>
      </div>

    </div>
  </form>

</section>

<modal-categoria *ngIf="showModalCategoria" [mostrarModal]="showModalCategoria" (resultadoConsulta)="resultadoConsultaCategoria($event)"></modal-categoria>
<modal-clasificacion *ngIf="showModalClasificacion" [mostrarModal]="showModalClasificacion" (resultadoConsulta)="resultadoConsultaClasificacion($event)"></modal-clasificacion>
<modal-subclasificacion *ngIf="showModalSubclasificacion" [mostrarModal]="showModalSubclasificacion"
  (resultadoConsulta)="resultadoConsultaSubclasificacion($event)"></modal-subclasificacion>
<modal-empaque *ngIf="showModalEmpaque" [mostrarModal]="showModalEmpaque" (resultadoConsulta)="resultQueryEmpaque($event)"></modal-empaque>
<modal-envase *ngIf="showModalEnvase" [mostrarModal]="showModalEnvase" (resultadoConsulta)="resultQueryEnvase($event)"></modal-envase>
<modal-unidad-medida *ngIf="showModalUnidadMedida" [mostrarModal]="showModalUnidadMedida" (resultadoConsulta)="resultQueryUnidadMedida($event)"></modal-unidad-medida>